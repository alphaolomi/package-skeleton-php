# Simplify VFD for PHP

[![Latest Version on Packagist](https://img.shields.io/packagist/v/alphaolomi/simplify-vfd.svg?style=flat-square)](https://packagist.org/packages/alphaolomi/simplify-vfd)
[![Tests](https://img.shields.io/github/actions/workflow/status/alphaolomi/php-simplify-vfd/run-tests.yml?branch=main&label=tests&style=flat-square)](https://github.com/alphaolomi/php-simplify-vfd/actions/workflows/run-tests.yml)
[![Total Downloads](https://img.shields.io/packagist/dt/alphaolomi/simplify-vfd.svg?style=flat-square)](https://packagist.org/packages/alphaolomi/simplify-vfd)
[![codecov](https://codecov.io/github/alphaolomi/php-simplify-vfd/graph/badge.svg?token=ZCVCGznrf9)](https://codecov.io/github/alphaolomi/php-simplify-vfd)

Simplify VFD is a PHP library to interact with the Simplify VFD API. This library provides a simple and easy-to-use interface to integrate VFD services into your PHP applications.

## Features

- **User Authentication**: Authenticate users and obtain access tokens.
- **Invoice Management**: Create, retrieve, and manage invoices.
- **Environment Configuration**: Switch between live and stage environments.
- **HTTP Client Integration**: Uses Guzzle HTTP client for making API requests.
- **Custom GUID Generation**: Utility function for generating unique identifiers.

## Installation

You can install the package via Composer:

```bash
composer require alphaolomi/simplify-vfd
```

## Configuration

The `SimplifyVfd` class requires a configuration array with the following keys:

- `environment`: The environment to use (`live` or `stage`).
- `username`: Your Simplify VFD username.
- `password`: Your Simplify VFD password.

## Usage

### Initializing the Service

```php
use Alphaolomi\SimplifyVfd\SimplifyVfd;

$config = [
    'environment' => 'stage', // or 'live'
    'username' => 'your_username',
    'password' => 'your_password',
];
$service = new SimplifyVfd($config, $client);
```

### User Login

```php
$data = [
    'username' => 'your_username',
    'password' => 'your_password'
];

$response = $service->userLogin($data);
print_r($response);
```

### Create Issued Invoice

```php
$data = [
    'dateTime' => date('Y-m-d'),
    'customer' => [
        'identificationType' => 'ID',
        'identificationNumber' => '1234567890',
        'vatRegistrationNumber' => '123456789',
        'name' => 'Customer Name',
        'mobileNumber' => '255123456789',
        'email' => 'customer@example.com',
    ],
    'invoiceAmountType' => 'GROSS',
    'items' => [
        [
            'itemName' => 'Product 1',
            'quantity' => 1,
            'price' => 100.00
        ]
    ],
    'payments' => [
        [
            'paymentType' => 'CASH',
            'amount' => 100.00
        ]
    ],
    'partnerInvoiceId' => 'unique-invoice-id'
];

$response = $service->createIssuedInvoice($data);
print_r($response);
```

### Get Invoice by Partner Invoice ID

```php
$partnerInvoiceId = 'unique-invoice-id';

$response = $service->getInvoiceByPartnerInvoiceId($partnerInvoiceId);
print_r($response);
```



## Testing

Using PestPHP for testing, Code coverage is generated by PHPUnit. Codecov is used to generate code coverage reports and badges.

```bash
composer test
```

## Changelog

Please see [CHANGELOG](CHANGELOG.md) for more information on what has changed recently.

## Contributing

Please see [CONTRIBUTING](https://github.com/spatie/.github/blob/main/CONTRIBUTING.md) for details.

## Security Vulnerabilities

Please review [our security policy](../../security/policy) on how to report security vulnerabilities.

## Credits

- [Alpha Olomi](https://github.com/alphaolomi)
- [Ernest Malcolm](httds://github.com/ernest)
- [All Contributors](../../contributors)

## License

The MIT License (MIT). Please see [License File](LICENSE.md) for more information.
